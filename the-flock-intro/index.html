<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>A Simulation of Sheep Herding - Part 1 - Emergent Behavior</title><meta name="description" content="For the past year (off and on) I've been working on a large scale simulation of sheep using Unity. My goal was to get over 1000 concurrent sheep moving over a realistic terrain on a reasonably good PC. While I've had eyes on making this&hellip;"><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="canonical" href="https://emergentbehavior.com/the-flock-intro/"><link rel="alternate" type="application/atom+xml" href="https://emergentbehavior.com/feed.xml" title="Emergent Behavior - RSS"><link rel="alternate" type="application/json" href="https://emergentbehavior.com/feed.json" title="Emergent Behavior - JSON"><meta property="og:title" content="A Simulation of Sheep Herding - Part 1"><meta property="og:image" content="https://emergentbehavior.com/media/posts/16/Screenshot-2021-05-12-231047.png"><meta property="og:image:width" content="1916"><meta property="og:image:height" content="1072"><meta property="og:site_name" content="Emergent Behavior"><meta property="og:description" content="For the past year (off and on) I've been working on a large scale simulation of sheep using Unity. My goal was to get over 1000 concurrent sheep moving over a realistic terrain on a reasonably good PC. While I've had eyes on making this&hellip;"><meta property="og:url" content="https://emergentbehavior.com/the-flock-intro/"><meta property="og:type" content="article"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@ben_throop"><meta name="twitter:title" content="A Simulation of Sheep Herding - Part 1"><meta name="twitter:description" content="For the past year (off and on) I've been working on a large scale simulation of sheep using Unity. My goal was to get over 1000 concurrent sheep moving over a realistic terrain on a reasonably good PC. While I've had eyes on making this&hellip;"><meta name="twitter:image" content="https://emergentbehavior.com/media/posts/16/Screenshot-2021-05-12-231047.png"><style>:root{--body-font:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";--heading-font:var(--body-font);--logo-font:var(--body-font);--menu-font:var(--body-font)}</style><link rel="stylesheet" href="https://emergentbehavior.com/assets/css/style.css?v=39e5ad835e4851bb91b093404d01dd85"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://emergentbehavior.com/the-flock-intro/"},"headline":"A Simulation of Sheep Herding - Part 1","datePublished":"2022-01-03T09:28-05:00","dateModified":"2025-12-11T12:48-05:00","image":{"@type":"ImageObject","url":"https://emergentbehavior.com/media/posts/16/Screenshot-2021-05-12-231047.png","height":1072,"width":1916},"description":"For the past year (off and on) I've been working on a large scale simulation of sheep using Unity. My goal was to get over 1000 concurrent sheep moving over a realistic terrain on a reasonably good PC. While I've had eyes on making this&hellip;","author":{"@type":"Person","name":"Ben","url":"https://emergentbehavior.com/authors/ben/"},"publisher":{"@type":"Organization","name":"Ben"}}</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-BLVP88XT2E"></script><script>window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-BLVP88XT2E');</script></head><body><div class="container js-container"><nav class="menu"><ul class="navbar__menu"><li><a href="https://emergentbehavior.com/about/" target="_self">About</a></li><li><a href="http://twitter.com/ben_throop" target="_self">Twitter</a></li><li><a href="mailto:ben@frameinteractive.com" target="_self">Email</a></li><li><a href="https://emergentbehavior.com/contact/" target="_self">Contact</a></li></ul><div class="menu__posts"><h2 class="menu__posts-title">All Posts</h2><ul class="menu__posts-list"><li class="menu__posts-item"><a href="https://emergentbehavior.com/a-big-night/"><strong>A Big Night</strong><br><small>December 11, 2025</small></a></li><li class="menu__posts-item"><a href="https://emergentbehavior.com/gpu-animation-in-unity/"><strong>Elegant GPU Animation in Unity</strong><br><small>November 6, 2022</small></a></li><li class="menu__posts-item"><a href="https://emergentbehavior.com/the-flock-intro/"><strong>A Simulation of Sheep Herding - Part 1</strong><br><small>January 3, 2022</small></a></li><li class="menu__posts-item"><a href="https://emergentbehavior.com/i-have-the-power-of-compute-shaders/"><strong>Compute Shaders and Emergent Algorithms</strong><br><small>June 4, 2021</small></a></li><li class="menu__posts-item"><a href="https://emergentbehavior.com/migs-2017-talk-blowing-things-up-in-unity/"><strong>MIGS 2017 Talk - Blowing Things up in Unity</strong><br><small>November 5, 2020</small></a></li><li class="menu__posts-item"><a href="https://emergentbehavior.com/headmaster-development-tools-talk/"><strong>Headmaster Development Tools Talk</strong><br><small>November 21, 2019</small></a></li><li class="menu__posts-item"><a href="https://emergentbehavior.com/headmaster-vr-at-the-2017-uefa-champions-league-final-part-2/"><strong>Headmaster @ 2017 Champions League Final</strong><br><small>June 6, 2017</small></a></li><li class="menu__posts-item"><a href="https://emergentbehavior.com/headmaster-vr-at-the-2017-uefa-champions-league-final-part-1/"><strong>Headmaster @ 2016 Champions League Final</strong><br><small>May 31, 2017</small></a></li><li class="menu__posts-item"><a href="https://emergentbehavior.com/responding-to-john-walker-of-rock-paper-shotgun/"><strong>Why root for VR to fail?</strong><br><small>July 21, 2015</small></a></li></ul></div></nav><div class="content"><header class="top"><div class="top__item top__item--right"><button class="menu-toggle js-menu-toggle" aria-label="Menu" aria-expanded="false"><span class="menu-toggle-box"><span class="menu-toggle-inner">Menu</span></span></button></div></header><main class="main"><div class="main__right"><div class="post__entry"><h1>A Simulation of Sheep Herding - Part 1</h1><p><time datetime="2022-01-03T09:28">January 3, 2022</time></p><p>For the past year (off and on) I've been working on a large scale simulation of sheep using Unity. My goal was to get over 1000 concurrent sheep moving over a realistic terrain on a reasonably good PC. While I've had eyes on making this a full game, I want to share what I'm doing before I get to a final decision on that. It's fun to play with even in this early state, and who knows there it will end up. So here we go!</p><figure class="post__image"><img loading="lazy" src="https://emergentbehavior.com/media/posts/16/Screenshot-2021-09-10-161552-2.jpg" alt="" width="1911" height="1077" sizes="(min-width: 61.3125em) 50vw, 100vw" srcset="https://emergentbehavior.com/media/posts/16/responsive/Screenshot-2021-09-10-161552-2-xs.jpg 300w, https://emergentbehavior.com/media/posts/16/responsive/Screenshot-2021-09-10-161552-2-sm.jpg 480w, https://emergentbehavior.com/media/posts/16/responsive/Screenshot-2021-09-10-161552-2-md.jpg 768w"></figure><figure class="post__image"><img loading="lazy" src="https://emergentbehavior.com/media/posts/16/Screenshot-2021-05-12-231212.png" alt="" width="1360" height="895" sizes="(min-width: 61.3125em) 50vw, 100vw" srcset="https://emergentbehavior.com/media/posts/16/responsive/Screenshot-2021-05-12-231212-xs.png 300w, https://emergentbehavior.com/media/posts/16/responsive/Screenshot-2021-05-12-231212-sm.png 480w, https://emergentbehavior.com/media/posts/16/responsive/Screenshot-2021-05-12-231212-md.png 768w"></figure><h2>Why?</h2><p>Well, as you can see from some other posts on here, and from the title of the site, I am really interested in emergent behavior. The interactions of individuals acting in their own self interest is responsible for so many phenomena we see very day. It's like playing with water - it never gets old even if it's totally familiar. I feel like being able to create this stuff on the computer is super interesting and can lead to a lot of crazy surprises.</p><p>Then I was watching the film <a href="https://en.wikipedia.org/wiki/Howl's_Moving_Castle_(film)">Howl's Moving Castle</a> with my family, and I came across this shot:</p><figure class="post__image"><img loading="lazy" src="https://emergentbehavior.com/media/posts/16/howlmovingcastle.webp" alt="" width="1023" height="552" sizes="(min-width: 61.3125em) 50vw, 100vw" srcset="https://emergentbehavior.com/media/posts/16/responsive/howlmovingcastle-xs.webp 300w, https://emergentbehavior.com/media/posts/16/responsive/howlmovingcastle-sm.webp 480w, https://emergentbehavior.com/media/posts/16/responsive/howlmovingcastle-md.webp 768w"></figure><p>It just hit me how interesting and beautiful flocks of sheep are. I could see how to do it. So I jumped in.</p><h2>Getting Educated</h2><p>It turned out to be a deep well. Humans and sheep have a very long and mature relationship so there's quite a bit of information and knowledge out there. One of the most useful resources was this simple site on raising sheep. I love that it was built in Dreamweaver.</p><p><a href="http://www.sheep101.info">http://www.sheep101.info</a></p><p>There are also academic papers with super complicated analyses of sheep behavior that are more meant for industry. I felt like starting with Boids would work.</p><h2>Boids</h2><p>A flock, whether it's birds, sheep, or fish, can be represented by a well known and elegant algorithm called Boids (<a href="http://www.red3d.com/cwr/boids/">Reynolds 1986</a>). </p><p>In the Boids algorithm, we determine the movement of each individual <em>agent </em>by observing its <em>neighbors</em> to calculate <em>forces.</em> These forces represent the agent's desire to stay close to other agents (cohesion), but not TOO close (separation). At the same time, each agent wants to move in the same direction as those around them (alignment). Once we balance these three fundamental forces we get interesting and natural behavior out of simple rules. </p><figure class="post__image post__image--center"><img loading="lazy" src="https://emergentbehavior.com/media/posts/16/Boids-Simple-2.gif" alt="" width="300" height="288"></figure><p>After the basic forces are set up, most implementations add avoidance so that the agents don't run into obstacles. However, I was most interested in them escaping from a predator such as a dog. After all, that's the basis for herding.</p><p>So I put together a basic implementation in Unity. This had cohesion, <span style="color: var(--text-editor-body-color); font-family: var(--font-base); font-size: inherit; font-weight: var(--font-weight-normal);">alignment, and separation and then after all that was summed up, the escape vector was thrown in. There was no avoidance but since these were rigidbodies, they gracefully slid along the walls and it worked. This also was fine with a few dozen sheep, but as the calculations for boids are O(n^2) it wasn't viable as the final algorithm. I wanted to have hundreds going at once.</span></p><figure class="post__image post__image--center"><img loading="lazy" src="https://emergentbehavior.com/media/posts/16/First.gif" alt="" width="476" height="296"></figure><h2>Up Front Optimizations</h2><p>The next step was to figure out how to get the numbers of sheep I wanted. The obvious thing was to make the logic multithreaded using Unity's Jobs System. This works by doing the boids forces calculations in a job so that it can be distributed across the CPU's cores. But there turned out to be a lot more to it than that.</p><p>There are bunch of performance intensive functions that needed attention:</p><ol><li>Neighbor Finding using Overlap Sphere</li><li>Ground detection using a raycast</li><li>World sensing via raycasts</li><li>Physics</li><li>Time slicing updates</li></ol><p> </p><p> </p><p> </p><footer><div class="post__tag-share"></div></footer></div></div><div class="main__left"><figure class="hero"><img src="https://emergentbehavior.com/media/posts/16/Screenshot-2021-05-12-231047.png" srcset="https://emergentbehavior.com/media/posts/16/responsive/Screenshot-2021-05-12-231047-xs.png 300w, https://emergentbehavior.com/media/posts/16/responsive/Screenshot-2021-05-12-231047-sm.png 480w, https://emergentbehavior.com/media/posts/16/responsive/Screenshot-2021-05-12-231047-md.png 768w, https://emergentbehavior.com/media/posts/16/responsive/Screenshot-2021-05-12-231047-lg.png 1024w, https://emergentbehavior.com/media/posts/16/responsive/Screenshot-2021-05-12-231047-xl.png 1280w, https://emergentbehavior.com/media/posts/16/responsive/Screenshot-2021-05-12-231047-2xl.png 1600w" sizes="(min-width: 61.3125em) 50vw, 100vw" loading="eager" height="1072" width="1916" alt=""></figure><header><h1>Hi, I'm <a href="https://emergentbehavior.com/about/">Ben Throop</a></h1><br>This is my personal site about game development and <a href="https://en.wikipedia.org/wiki/Emergence">emergent behavior</a>. You can learn more about me <a href="https://emergentbehavior.com/about/">here</a>.<div class="main__all-posts"><br><h1>All Posts</h1><ul><li id="allPostsListItem"><a href="https://emergentbehavior.com/a-big-night/"><strong>A Big Night</strong></a><br><small>December 11, 2025</small></li><li id="allPostsListItem"><a href="https://emergentbehavior.com/gpu-animation-in-unity/"><strong>Elegant GPU Animation in Unity</strong></a><br><small>November 6, 2022</small></li><li id="allPostsListItem"><a href="https://emergentbehavior.com/the-flock-intro/"><strong>A Simulation of Sheep Herding - Part 1</strong></a><br><small>January 3, 2022</small></li><li id="allPostsListItem"><a href="https://emergentbehavior.com/i-have-the-power-of-compute-shaders/"><strong>Compute Shaders and Emergent Algorithms</strong></a><br><small>June 4, 2021</small></li><li id="allPostsListItem"><a href="https://emergentbehavior.com/migs-2017-talk-blowing-things-up-in-unity/"><strong>MIGS 2017 Talk - Blowing Things up in Unity</strong></a><br><small>November 5, 2020</small></li><li id="allPostsListItem"><a href="https://emergentbehavior.com/headmaster-development-tools-talk/"><strong>Headmaster Development Tools Talk</strong></a><br><small>November 21, 2019</small></li><li id="allPostsListItem"><a href="https://emergentbehavior.com/headmaster-vr-at-the-2017-uefa-champions-league-final-part-2/"><strong>Headmaster @ 2017 Champions League Final</strong></a><br><small>June 6, 2017</small></li><li id="allPostsListItem"><a href="https://emergentbehavior.com/headmaster-vr-at-the-2017-uefa-champions-league-final-part-1/"><strong>Headmaster @ 2016 Champions League Final</strong></a><br><small>May 31, 2017</small></li><li id="allPostsListItem"><a href="https://emergentbehavior.com/responding-to-john-walker-of-rock-paper-shotgun/"><strong>Why root for VR to fail?</strong></a><br><small>July 21, 2015</small></li></ul></div></header></div></main><footer class="footer"><div class="footer__social"><a href="https://mastodon.gamedev.place/@benthroop" class="facebook" aria-label="Facebook"><svg class="icon"><use xlink:href="https://emergentbehavior.com/assets/svg/svg-map.svg#facebook"/></svg> </a><a href="http://twitter.com/ben_throop" class="twitter" aria-label="Twitter"><svg class="icon"><use xlink:href="https://emergentbehavior.com/assets/svg/svg-map.svg#twitter"/></svg> </a><a href="http://linkedin.com/in/benthroop" class="linkedin" aria-label="LinkedIn"><svg class="icon"><use xlink:href="https://emergentbehavior.com/assets/svg/svg-map.svg#linkedin"/></svg> </a><a href="https://bsky.app/profile/benthroop.com" class="pinterest" aria-label="Pinterest"><svg class="icon"><use xlink:href="https://emergentbehavior.com/assets/svg/svg-map.svg#pinterest"/></svg> </a><a href="https://www.youtube.com/@benthroop" class="youtube" aria-label="Youtube"><svg class="icon"><use xlink:href="https://emergentbehavior.com/assets/svg/svg-map.svg#youtube"/></svg></a></div><div class="footer__copyright">&copy; 2026 Ben Throop</div></footer></div></div><script defer="defer" src="https://emergentbehavior.com/assets/js/scripts.min.js?v=f5b684f5b88f06f52bdfd50819f87ca4"></script><script>var images = document.querySelectorAll('img[loading]');

        for (var i = 0; i < images.length; i++) {
            if (images[i].complete) {
                images[i].classList.add('is-loaded');
            } else {
                images[i].addEventListener('load', function () {
                    this.classList.add('is-loaded');
                }, false);
            }
        }</script></body></html>